## 2020.1.4 天气 晴

&emsp;&emsp;老师傅今天一次性给我发了34个redis应用场景，
我估计他寻思我能玩一周，试试看，以下是任务列表：   

&emsp;&emsp;计划是先一次性整理出各题目的实现思路，再按照数据类型分配去代码实现  
&emsp;&emsp;不会的就问！  

1. 使用redis 实现的缓存机制				     	
__完成__
2. 使用redis实现最简单的分布式锁
解：
&emsp;&emsp;分布式锁解决的2个问题的是：  
① 解决多用户操作的幂等性问题  --> 比如避免用户重复提交导致出现多条相同的订单  
② 把多用户的并行操作转换为串行操作  ---> 高并发减库存  
redis分布式锁实现靠自身的原子性， 但需要注意的是：setnx和expire是两个操作步骤, 这样是无法保证原子性的哦     
所以有了：
```shell
SET key value [NX] [XX] [EX<seconds>] [PX <millseconds>] 
SET： 命令
key： 待设置的key
value: 设置的key的value

可选参数
NX: 表示key不存在的时候才设置，如果存在返回NULL
XX: 表示key存在的时候才设置，如果不存在则返回NULL
EX seconds: 设置过期时间，过期时间精确为秒
PX millsecond: 设置过期时间， 过期时间精确为毫秒
```
所以，原生的API实现就是： SET my_lock true NX px 600000
给出的springboot实现请移步： xxx  

3. 博客的发布与查看  
?

4. 博客字数统计与文章预览  
解： 原生API： STRLEN key  
Java代码实现场景，如果只是字符串，直接根据key拿到string取length即可  

5. 用户操作日志审计功能
?

6. 实现一个简单的唯一id生成器
解：原生API 就是调用incr 命令  
Java代码实现场景： 可以直接调用api：redisTemplate.opsForValue().increment(key,increment);  

7. 实现博客点赞次数计数器
思路： 点赞的技术就在于要判断该用户是否已经点赞， 已重复的点赞即取消点赞或直接无效  
因为是需要去重的，那就上set数据类型  
解：  原生API  
① 点赞   
```java
sadd like:xxx作品id xx用户id  
```
② 取消点赞    
```java
srem like:xxx作品id xx用户id  
```
③ 查看当前点赞用户  
```java
smembers like:xxx作品id
```
Java代码实现场景 __待续__  

8. 社交网站的网址点击追踪实战  
不太明白这个点击追踪实战是什么意思？是指短链接吗？  
短链接的实现依赖于hash数据类型和MD5加密算法
直接是Java代码实现场景 __待续__

9. 博客网站案例代码重构（__暂时不做__）

10. 基于令牌的用户登录会话机制  
__已在某demo实现__ 

11. 秒杀活动下的公平队列抢购机制  
思路：

12. 博客网站的分页浏览  
思路：这个是采用redis来实现分页么？

13. 实现oa系统中的待办事项列表管理  


14. 网站用户注册的时候邮件验证机制  


15. 网站每日 uv 数据指标去重统计  


16. 博客网站的文章标签管理  


17. 朋友圈点赞功能的实现  
应该同7

18. 类似微博的社交关系

19. 微博的共同关注与推荐关注

20. 实现网站上的抽奖程序

21. 为商品搜索构建反向索引

22. 实现音乐网站的排行榜程序

23. 实现一个新闻推荐机制

24. 购买此商品的顾客也同时购买了

25. 网站搜索框的自动补全功能

26. 基于hyperloglog的网站uv统计

27. 网站重复垃圾数据的快速去重和过滤

28. 日活跃用户数，月活跃用户数，年活跃用户数的统计

29. 基于位图的网站用户行为记录程序

30. 基于geohash 你与商铺距离计算的程序

31. 陌生人社交app里查找附近的人功能

32. 带有自动过期时间的分布式缓存实现

33. 支持超时自动释放的分布式缓存时间

34. 支持自动过期的用户登录会话实现

35. 支持冷数据自动淘汰的自动补全程序

36. 支持身份验证的分布式锁释放机制

